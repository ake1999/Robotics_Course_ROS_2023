<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro">
  <material name="grey">
    <color rgba="0.5 0.5 0.5 1.0"/>
  </material>
  <xacro:macro name="kuka_lbr_iiwa_14_r820" >
    <!-- link list -->
    <link name="base_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/visual/base_link.dae" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/collision/base_link.stl" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="4" />
        <inertia ixx="0.01" ixy="0.0" ixz="0.0"
                 iyy="0.01" iyz="0.0"
                 izz="0.01" />
      </inertial>
      </link>
    <link name="link_1">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/visual/link_1.dae" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/collision/link_1.stl" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="3.94781" />
        <inertia ixx="0.00455" ixy="0.0" ixz="0.0"
                 iyy="0.00454" iyz="0.00001"
                 izz="0.00029" />
      </inertial>
    </link>
    <link name="link_2">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/visual/link_2.dae" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/collision/link_2.stl" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="4.50275" />
        <inertia ixx="0.00032" ixy="0.0" ixz="0.0"
                 iyy="0.00010" iyz="0.0"
                 izz="0.00042" />
      </inertial>
    </link>
    <link name="link_3">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/visual/link_3.dae" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/collision/link_3.stl" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="2.45520" />
        <inertia ixx="0.00223" ixy="-0.00005" ixz="0.00007"
                 iyy="0.00219" iyz="0.00007"
                 izz="0.00073" />
      </inertial>
    </link>
    <link name="link_4">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/visual/link_4.dae" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/collision/link_4.stl" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="2.61155" />
        <inertia ixx="0.03844" ixy="0.00088" ixz="-0.00112"
                 iyy="0.01144" iyz="-0.00111"
                 izz="0.04988" />
      </inertial>
    </link>
    <link name="link_5">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/visual/link_5.dae" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/collision/link_5.stl" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="3.41000" />
        <inertia ixx="0.00277" ixy="-0.00001" ixz="0.00001"
                 iyy="0.00284" iyz="0.0"
                 izz="0.00012" />
      </inertial>
    </link>
    <link name="link_6">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/visual/link_6.dae" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/collision/link_6.stl" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="3.38795" />
        <inertia ixx="0.00050" ixy="-0.00005" ixz="-0.00003"
                 iyy="0.00281" iyz="-0.00004"
                 izz="0.00232" />
      </inertial>
    </link>
    <link name="link_7">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/visual/link_7.dae" />
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/lbr_iiwa_14_r820/collision/link_7.stl" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="0.35432" />
        <inertia ixx="0.00795" ixy="0.00022" ixz="-0.00029"
                 iyy="0.01089" iyz="-0.00029"
                 izz="0.00294" />
      </inertial>
    </link>
    <link name="tool0">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size="0.05 0.11 0.005" />
        </geometry>
        <material name="grey"/>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size="0.05 0.11 0.005" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="0 0 0" />
        <mass value="1.0e-03" />
        <inertia ixx="1.0e-03" ixy="0.0" ixz="0.0"
                 iyy="1.0e-03" iyz="0.0"
                 izz="1.0e-03" />
      </inertial>
    </link>
    <!-- end of link list -->

  <!--  Gripper link -->
  <link name="gripper_link">
    <visual>
      <origin xyz="0.0 0.0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/gripper/chain_link_grip_l.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="grey"/>
    </visual>

    <collision>
      <origin xyz="0.0 0.0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/gripper/chain_link_grip_l.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>

    <inertial>
      <origin xyz="0 0 0" />
      <mass value="1.0e-03" />
      <inertia ixx="1.0e-03" ixy="0.0" ixz="0.0"
               iyy="1.0e-03" iyz="0.0"
               izz="1.0e-03" />
    </inertial>
  </link>

  <!--  Gripper link sub -->
  <link name="gripper_link_sub">
    <visual>
      <origin xyz="0.0 -0.0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/gripper/chain_link_grip_r.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="grey"/>
    </visual>

    <collision>
      <origin xyz="0.0 -0.0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_lbr_iiwa_description_pkg/meshes/gripper/chain_link_grip_r.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>

    <inertial>
      <origin xyz="0 0 0" />
      <mass value="1.0e-03" />
      <inertia ixx="1.0e-03" ixy="0.0" ixz="0.0"
               iyy="1.0e-03" iyz="0.0"
               izz="1.0e-03" />
    </inertial>
  </link>


    <!-- joint list -->
    <joint name="joint_a1" type="revolute">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="base_link" />
      <child link="link_1" />
      <axis xyz="0 0 1" />
      <limit lower="-2.9668" upper="2.9668" effort="100" velocity="1.4834" />
    </joint>
    <joint name="joint_a2" type="revolute">
      <origin xyz="-0.00043624 0 0.36" rpy="0 0 0" />
      <parent link="link_1" />
      <child link="link_2" />
      <axis xyz="0 1 0" />
      <limit lower="-2.0942" upper="2.0942" effort="100" velocity="1.4834" />
    </joint>
    <joint name="joint_a3" type="revolute">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="link_2" />
      <child link="link_3" />
      <axis xyz="0 0 1" />
      <limit lower="-2.9668" upper="2.9668" effort="100" velocity="1.7452" />
    </joint>
    <joint name="joint_a4" type="revolute">
      <origin xyz="0.00043624 0 0.42" rpy="0 0 0" />
      <parent link="link_3" />
      <child link="link_4" />
      <axis xyz="0 -1 0" />
      <limit lower="-2.0942" upper="2.0942" effort="100" velocity="1.3089" />
    </joint>
    <joint name="joint_a5" type="revolute">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="link_4" />
      <child link="link_5" />
      <axis xyz="0 0 1" />
      <limit lower="-2.9668" upper="2.9668" effort="100" velocity="2.2688" />
    </joint>
    <joint name="joint_a6" type="revolute">
      <origin xyz="0 0 0.4" rpy="0 0 0" />
      <parent link="link_5" />
      <child link="link_6" />
      <axis xyz="0 1 0" />
      <limit lower="-2.0942" upper="2.0942" effort="100" velocity="2.356" />
    </joint>
    <joint name="joint_a7" type="revolute">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="link_6" />
      <child link="link_7" />
      <axis xyz="0 0 1" />
      <limit lower="-3.0541" upper="3.0541" effort="100" velocity="2.356" />
    </joint>
    <joint name="joint_a7-tool0" type="fixed">
      <origin xyz="0 0 0.126" rpy="0 0 0" />
      <parent link="link_7" />
      <child link="tool0" />
      <axis xyz="0 0 0" />
    </joint>

    <!--  Gripper joint  -->
  <joint name="gripper" type="prismatic">
    <parent link="tool0"/>
    <child link="gripper_link"/>
    <origin xyz="0 0.017 0" rpy="0 -1.57 0"/>
    <axis xyz="0 1 0"/>
    <limit velocity="4.8" effort="1" lower="-0.008" upper="0.019" />
  </joint>


    <!--  Gripper joint sub -->
  <joint name="gripper_sub" type="prismatic">
    <parent link="tool0"/>
    <child link="gripper_link_sub"/>
    <origin xyz="0 -0.017 0" rpy="0 -1.57 0"/>
    <axis xyz="0 -1 0"/>
    <limit velocity="4.8" effort="1" lower="-0.008" upper="0.019" />
    <mimic joint="gripper" multiplier="1"/>
  </joint>

    <!-- ROS base_link to KUKA $ROBROOT coordinate system transform -->
    <link name="world" />
    <joint name="base_link-world" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <parent link="world"/>
      <child link="base_link"/>
    </joint>
    <!--  Camera  -->
    <link name="camera_link" >
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size="0.05 0.05 0.05" />
        </geometry>
        <material name="grey"/>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <box size="0.05 0.05 0.1"/>
        </geometry>
      </collision>
    
      <inertial>
          <mass value="0.2" />
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
      </inertial>
    </link>
    <joint name="camera_link-world" type="fixed">
      <origin xyz="0 0 11" rpy="0 1.57 1.57"/>
      <parent link="world"/>
      <child link="camera_link"/>
    </joint>
  </xacro:macro>

</robot>
